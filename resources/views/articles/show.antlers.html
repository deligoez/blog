<div id="top"></div>
<!-- Sticky Header (appears on scroll) -->
<div class="hidden md:block sticky-article-header"
     x-data="{ scrolled: false }"
     x-init="window.addEventListener('scroll', () => { scrolled = window.scrollY > 300 })"
     x-show="scrolled"
     x-transition:enter="transition ease-out duration-200"
     x-transition:enter-start="opacity-0 -translate-y-4"
     x-transition:enter-end="opacity-100 translate-y-0"
     x-transition:leave="transition ease-in duration-150"
     x-transition:leave-start="opacity-100 translate-y-0"
     x-transition:leave-end="opacity-0 -translate-y-4"
     x-cloak>
    <div class="sticky-header-content">
        <a href="{{ homepage }}" class="sticky-header-logo">
            {{ partial:partials/logo }}
        </a>
        <span class="sticky-header-title title-markdown">{{ title | markdown }}</span>
    </div>
</div>

<div class="article-container flex flex-col md:flex-row mt-8 md:mt-12 mb-32 md:mb-52"
     x-data="{ scrolled: false }"
     x-init="window.addEventListener('scroll', () => { scrolled = window.scrollY > 300 })">
    <!-- Mobile Header -->
    <div class="md:hidden mb-8">
        <h1 class="fluid-mobile-title font-semibold text-center border-t-[3px] pt-2 border-black dark:border-white title-markdown">
            {{ title | markdown }}
        </h1>
        <h2 class="mt-3 fluid-mobile-subtitle italic text-center text-gray-600 dark:text-gray-300 title-markdown">
            {{ subtitle | markdown }}
        </h2>
        <div class="flex justify-center items-center mt-4 space-x-4 fluid-meta italic text-gray-500 dark:text-gray-400">
            <span>{{ partial:partials/info/date icon_last="true" }}</span>
            <span>{{ partial:partials/info/words icon_last="true" }}</span>
        </div>
    </div>

    <!-- Desktop Sidebar (fades out on scroll) -->
    <div class="hidden md:flex article-sidebar article-sidebar-scrollable flex-col"
         :class="{ 'sidebar-hidden': scrolled }">
        <!-- Logo above article title -->
        <div class="flex justify-end">
            <a href="{{ homepage }}" class="article-sidebar-logo">
                {{ partial:partials/logo }}
            </a>
        </div>
        <h1 class="w-full fluid-title font-semibold text-right border-t-[3px] pt-2 border-black dark:border-white title-markdown">
            {{ title | markdown }}
        </h1>
        <h2 class="w-full mt-3 fluid-subtitle italic text-right dark:text-gray-300 title-markdown">
            {{ subtitle | markdown }}
        </h2>

        <p class="w-full mt-4 fluid-meta italic leading-none text-gray-500 dark:text-gray-400 text-right">
            {{ partial:partials/info/date icon_last="true" }}
        </p>

        <p class="w-full mt-2 fluid-meta italic leading-none text-gray-500 dark:text-gray-400 text-right">
            {{ partial:partials/info/words icon_last="true" }}
        </p>

        <!-- Sticky TOC -->
        {{ partial:toc-sidebar }}
    </div>

    <!-- Content -->
    <div class="article-content space-y-4 md:space-y-6">
        {{ content }}
            {{ if type == 'set' }}
                {{# Custom bard sets #}}
                {{ partial src="partials/bard/{values:type}" }}
            {{ else }}
                {{# Native bard types (paragraph, heading, list, etc.) #}}
                {{ partial src="partials/bard/{type}" }}
            {{ /if }}
        {{ /content }}
    </div>
</div>
