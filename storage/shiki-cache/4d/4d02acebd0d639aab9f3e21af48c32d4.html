<pre class="shiki shiki-themes github-light github-dark" style="background-color:#fff;--shiki-dark-bg:#24292e;color:#24292e;--shiki-dark:#e1e4e8;"><code><span class="line"><span style="color:#6A737D;--shiki-dark:#6A737D">// Order with calculated forward price: 10,000.00 USD</span></span>
<span class="line"><span style="color:#6A737D;--shiki-dark:#6A737D">// After allocation and rounding: 10,001.00 USD</span></span>
<span class="line"><span style="color:#6A737D;--shiki-dark:#6A737D">// Difference: 1.00 USD</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;--shiki-dark:#6A737D">// System automatically:</span></span>
<span class="line"><span style="color:#6A737D;--shiki-dark:#6A737D">// 1. Creates coupon ROUND-X8K2M9P1 for 1.00 USD</span></span>
<span class="line"><span style="color:#6A737D;--shiki-dark:#6A737D">// 2. Distributes proportionally:</span></span>
<span class="line"><span style="color:#6A737D;--shiki-dark:#6A737D">//    - Item 1 (60% of order): 0.60 USD discount</span></span>
<span class="line"><span style="color:#6A737D;--shiki-dark:#6A737D">//    - Item 2 (40% of order): 0.40 USD discount</span></span>
<span class="line"><span style="color:#6A737D;--shiki-dark:#6A737D">// 3. Final totals match exactly: 10,000.00 USD</span></span></code></pre>